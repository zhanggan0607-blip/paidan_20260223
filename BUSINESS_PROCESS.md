# 系统业务流程文档

## 一、系统概述

### 1.1 系统定位

维保工单管理系统是一个面向维保服务企业的综合管理平台，主要功能包括：
- 项目信息管理
- 维保计划制定与执行
- 工单流转管理（定期巡检、临时维修、零星用工）
- 备品备件管理
- 维修工具管理
- 人员与客户管理

### 1.2 用户角色

| 角色 | 权限范围 | 主要职责 |
|------|----------|----------|
| 管理员 | 系统全部功能 | 系统配置、用户管理、数据维护 |
| 部门经理 | 本部门相关功能 | 维保计划制定、工单审批、巡检事项维护 |
| 员工 | 个人相关功能 | 工单执行、填写提交、物资领用 |

---

## 二、核心业务流程

### 2.1 整体业务流程图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              维保工单管理系统业务流程                                  │
└─────────────────────────────────────────────────────────────────────────────────────┘

                                    ┌──────────────┐
                                    │   基础信息    │
                                    │   维护阶段    │
                                    └──────┬───────┘
                                           │
                    ┌──────────────────────┼──────────────────────┐
                    │                      │                      │
                    ▼                      ▼                      ▼
            ┌──────────────┐      ┌──────────────┐      ┌──────────────┐
            │  项目信息     │      │  人员信息     │      │  巡检事项     │
            │  维护         │      │  维护         │      │  维护         │
            │(project_info) │      │ (personnel)  │      │(inspection_  │
            │              │      │              │      │   item)      │
            └──────┬───────┘      └──────────────┘      └──────────────┘
                   │
                   ▼
           ┌──────────────┐
           │   计划制定    │
           │   阶段        │
           └──────┬───────┘
                   │
                   ▼
    ┌──────────────────────────────────────────────┐
    │              维保计划制定                      │
    │           (maintenance_plan)                  │
    │  管理员/部门经理基于项目信息制定维保计划          │
    └─────────────────────┬────────────────────────┘
                          │
                          ▼
           ┌──────────────────────────────┐
           │         事项选择              │
           │   选择需要执行的维保事项        │
           │   (巡检/维修/零星用工)         │
           └──────────────┬───────────────┘
                          │
                          ▼
           ┌──────────────────────────────┐
           │         工单生成              │
           │  系统自动生成对应维保工单       │
           └──────────────┬───────────────┘
                          │
        ┌─────────────────┼─────────────────┐
        │                 │                 │
        ▼                 ▼                 ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│  定期巡检单   │  │  临时维修单   │  │  零星用工单   │
│(periodic_    │  │(temporary_   │  │(spot_work)   │
│ inspection)  │  │   repair)    │  │              │
└──────┬───────┘  └──────┬───────┘  └──────┬───────┘
       │                 │                 │
       └─────────────────┼─────────────────┘
                         │
                         ▼
           ┌──────────────────────────────┐
           │         工单流转              │
           │    未进行→待下发→待确认→      │
           │    执行中→待审批→已完成        │
           └──────────────┬───────────────┘
                          │
        ┌─────────────────┼─────────────────┐
        │                 │                 │
        ▼                 ▼                 ▼
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│  备品备件     │  │  维修工具     │  │  人员签字     │
│  领用/使用    │  │  领用/归还    │  │  身份验证     │
└──────────────┘  └──────────────┘  └──────────────┘
```

---

### 2.2 工单流转详细流程

#### 2.2.1 工单状态流转图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                                 工单状态流转图                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘

  ┌──────────┐     5天内      ┌──────────┐     下发      ┌──────────┐
  │  未进行   │ ──────────────▶│  待下发   │ ─────────────▶│  待确认   │
  │          │                │          │               │          │
  │ 工单创建  │                │显示下发   │               │员工接收   │
  │ 等待下发  │                │  按钮     │               │工单      │
  └──────────┘                └──────────┘               └────┬─────┘
                                                              │
                                     员工确认                   │
                                     ──────────────────────────┘
                                                              │
                                                              ▼
  ┌──────────┐     退回      ┌──────────┐     提交      ┌──────────┐
  │  已退回   │ ◀────────────│  待审批   │ ◀────────────│  执行中   │
  │          │               │          │               │          │
  │主管审批   │               │员工提交   │               │员工执行   │
  │不通过     │               │等待审批   │               │填写工单   │
  └────┬─────┘               └────┬─────┘               └──────────┘
       │                          │
       │                          │ 审批通过
       │ 修改后重新提交             │
       │                          ▼
       │                    ┌──────────┐
       └───────────────────▶│  已完成   │
                            │          │
                            │流程结束   │
                            │归档      │
                            └──────────┘
```

#### 2.2.2 状态详细说明

| 状态 | 触发条件 | 操作人 | 可执行操作 | 数据变更 |
|------|----------|--------|------------|----------|
| 未进行 | 工单创建 | 系统 | 无 | 创建工单记录 |
| 待下发 | 距计划开始日期≤5天 | 系统 | 管理员/部门经理可下发 | 显示下发按钮 |
| 待确认 | 工单下发 | 管理员/部门经理 | 员工可确认接收 | maintenance_personnel赋值 |
| 执行中 | 员工确认 | 员工 | 填写工单内容、上传图片、签字 | 填写检查项、更新filled_count |
| 待审批 | 员工提交 | 员工 | 主管可审批/退回 | 记录提交时间 |
| 已退回 | 主管退回 | 部门经理 | 员工可修改重新提交 | 记录退回原因 |
| 已完成 | 主管审批通过 | 部门经理 | 无 | 记录审批时间、归档 |

---

### 2.3 三种工单类型业务流程

#### 2.3.1 定期巡检单流程

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              定期巡检单业务流程                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  维保计划     │────▶│  生成巡检单   │────▶│  下发工单     │────▶│  员工确认     │
│(maintenance_ │     │(periodic_    │     │              │     │              │
│    plan)     │     │ inspection)  │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
                                                   │
                                                   ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  归档完成     │◀────│  主管审批     │◀────│  员工提交     │◀────│  执行巡检     │
│              │     │              │     │              │     │              │
│              │     │              │     │              │     │填写检查项     │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘

详细步骤：
1. 【计划创建】管理员/部门经理创建维保计划，选择"定期巡检"类型
2. 【工单生成】系统根据计划自动生成巡检单，编号规则：XJ-项目编号-YYYYMMDD
3. 【工单下发】距离计划开始日期5天内，显示下发按钮，点击下发
4. 【员工确认】员工在手机端确认接收工单
5. 【执行巡检】员工到达现场，逐项填写检查内容：
   - 检查项目状态
   - 上传现场照片（自动加水印：姓名、时间、经纬度）
   - 填写检查结果
   - 记录异常情况
6. 【签字确认】巡检完成后，进行签字确认
7. 【提交审批】员工提交工单，状态变为"待审批"
8. 【主管审批】部门经理审核工单内容：
   - 审批通过 → 状态变为"已完成"
   - 审批不通过 → 状态变为"已退回"，员工需修改后重新提交

涉及数据表：
- maintenance_plan（维保计划）
- periodic_inspection（定期巡检单）
- inspection_item（巡检事项配置）
```

#### 2.3.2 临时维修单流程

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              临时维修单业务流程                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  故障报修     │────▶│  创建维修单   │────▶│  下发工单     │────▶│  员工确认     │
│              │     │(temporary_   │     │              │     │              │
│              │     │   repair)    │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
                                                   │
                                                   ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  归档完成     │◀────│  主管审批     │◀────│  员工提交     │◀────│  执行维修     │
│              │     │              │     │              │     │              │
│              │     │              │     │              │     │记录维修过程   │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘

详细步骤：
1. 【故障发现】设备故障或异常情况被发现
2. 【创建工单】管理员/部门经理创建临时维修单，编号规则：WX-项目编号-YYYYMMDD
3. 【工单下发】将工单下发给指定维修人员
4. 【员工确认】维修人员确认接收工单
5. 【执行维修】维修人员到达现场：
   - 故障诊断
   - 维修处理
   - 更换备件（如有）
   - 上传维修照片
   - 填写维修记录
6. 【签字确认】维修完成后签字确认
7. 【提交审批】员工提交工单
8. 【主管审批】部门经理审核维修结果

涉及数据表：
- maintenance_plan（维保计划）
- temporary_repair（临时维修单）
- spare_parts_usage（备件领用记录）
```

#### 2.3.3 零星用工单流程

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              零星用工单业务流程                                        │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  用工需求     │────▶│  创建用工单   │────▶│  下发工单     │────▶│  员工确认     │
│              │     │(spot_work)   │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
                                                   │
                                                   ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  归档完成     │◀────│  主管审批     │◀────│  员工提交     │◀────│  执行工作     │
│              │     │              │     │              │     │              │
│              │     │              │     │              │     │记录工作内容   │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
                                                   │
                                                   ▼
                                         ┌──────────────┐
                                         │  特殊要求     │
                                         │  班组签字     │
                                         │  身份证拍照   │
                                         │  正反面       │
                                         └──────────────┘

详细步骤：
1. 【需求提出】临时性、零散性工作需求
2. 【创建工单】管理员/部门经理创建零星用工单，编号规则：YG-项目编号-YYYYMMDD
3. 【工单下发】下发给指定员工
4. 【员工确认】员工确认接收
5. 【执行工作】员工完成工作内容
6. 【特殊签字】零星用工单需要：
   - 班组签字确认
   - 工人身份证拍照（正反面）
   - 自动识别身份证信息
7. 【提交审批】员工提交工单
8. 【主管审批】部门经理审核

涉及数据表：
- maintenance_plan（维保计划）
- spot_work（零星用工单）
- personnel（人员信息）
```

---

## 三、物资管理业务流程

### 3.1 备品备件管理流程

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              备品备件管理流程                                          │
└─────────────────────────────────────────────────────────────────────────────────────┘

                              ┌──────────────┐
                              │  采购入库     │
                              │              │
                              └──────┬───────┘
                                     │
                                     ▼
┌──────────────┐              ┌──────────────┐              ┌──────────────┐
│ spare_parts_ │    入库增加   │ spare_parts_ │   库存为0    │    状态      │
│   inbound    │─────────────▶│    stock     │─────────────▶│    缺货      │
│  入库记录表   │              │   库存表      │              │              │
└──────────────┘              └──────┬───────┘              └──────────────┘
                                     │
                        ┌────────────┴────────────┐
                        │                         │
                        ▼                         ▼
              ┌──────────────┐          ┌──────────────┐
              │   状态：在库  │          │   状态：已使用│
              │   库存>0     │          │   被领用     │
              └──────┬───────┘          └──────┬───────┘
                     │                         │
                     │ 领用                    │
                     ▼                         ▼
              ┌──────────────┐          ┌──────────────┐
              │ spare_parts_ │          │   扣减库存    │
              │    usage     │─────────▶│   数量       │
              │   领用表      │          │              │
              └──────────────┘          └──────────────┘

业务规则：
1. 【入库流程】
   - 填写入库单信息（产品名称、品牌、型号、数量、供应商等）
   - 系统自动生成入库单号
   - 增加对应库存数量
   - 状态设置为"在库"

2. 【领用流程】
   - 选择要领用的备件
   - 填写领用数量、领用人、项目信息
   - 扣减库存数量
   - 状态更新为"已使用"
   - 关联项目编号

3. 【库存预警】
   - 库存数量为0时，状态自动变为"缺货"
   - 可设置最低库存预警线

数据表关系：
spare_parts_inbound ──入库──▶ spare_parts_stock ◀──领用── spare_parts_usage
                                        │
                                        └──关联──▶ project_info
```

### 3.2 维修工具管理流程

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              维修工具管理流程                                          │
└─────────────────────────────────────────────────────────────────────────────────────┘

                              ┌──────────────┐
                              │  工具入库     │
                              │              │
                              └──────┬───────┘
                                     │
                                     ▼
                            ┌──────────────┐
                            │repair_tools_ │
                            │    stock     │
                            │   工具库存表   │
                            │  状态：已归还  │
                            └──────┬───────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
            ┌──────────────┐┌──────────────┐┌──────────────┐
            │   领用       ││   归还       ││   损坏       │
            │  状态：已领用 ││  状态：已归还 ││  状态：已损坏 │
            └──────┬───────┘└──────────────┘└──────────────┘
                   │
                   ▼
          ┌──────────────┐
          │repair_tools_ │
          │    issue     │
          │  工具领用表   │
          └──────────────┘

业务规则：
1. 【入库流程】
   - 录入工具信息（名称、分类、规格、数量、存放位置）
   - 状态设置为"已归还"

2. 【领用流程】
   - 选择工具，填写领用数量、领用人、项目信息
   - 库存表状态更新为"已领用"
   - 领用表记录领用信息

3. 【归还流程】
   - 选择领用记录，填写归还数量
   - 支持部分归还
   - 状态更新为"已归还"

4. 【损坏流程】
   - 归还时发现损坏
   - 状态更新为"已损坏"
   - 记录损坏原因

数据表关系：
repair_tools_stock ◀──归还── repair_tools_issue
        │                  │
        │                  └──关联──▶ project_info
        │
        └──状态变更──▶ 已归还/已领用/已损坏
```

---

## 四、业务流程与数据表对应关系

### 4.1 核心业务流程数据表映射

| 业务流程 | 主要数据表 | 辅助数据表 | 数据流向 |
|----------|------------|------------|----------|
| 项目管理 | project_info | customer, personnel | 项目创建 → 关联客户和负责人 |
| 计划制定 | maintenance_plan | project_info, inspection_item | 选择项目 → 配置巡检事项 → 创建计划 |
| 定期巡检 | periodic_inspection | maintenance_plan, inspection_item | 计划生成 → 执行巡检 → 审批归档 |
| 临时维修 | temporary_repair | maintenance_plan, spare_parts_usage | 创建工单 → 执行维修 → 使用备件 → 审批 |
| 零星用工 | spot_work | maintenance_plan, personnel | 创建工单 → 执行工作 → 身份验证 → 审批 |
| 备件入库 | spare_parts_inbound, spare_parts_stock | - | 入库记录 → 更新库存 |
| 备件领用 | spare_parts_usage, spare_parts_stock | project_info | 领用记录 → 扣减库存 → 关联项目 |
| 工具领用 | repair_tools_issue, repair_tools_stock | project_info | 领用记录 → 更新状态 → 关联项目 |

### 4.2 数据表依赖关系图

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              数据表依赖关系图                                          │
└─────────────────────────────────────────────────────────────────────────────────────┘

                              ┌──────────────┐
                              │ project_info │
                              │   项目信息    │
                              │   (核心表)    │
                              └──────┬───────┘
                                     │
         ┌───────────┬───────────┬───┴───┬───────────┬───────────┐
         │           │           │       │           │           │
         ▼           ▼           ▼       ▼           ▼           ▼
┌──────────────┐┌──────────────┐┌──────────────┐┌──────────────┐┌──────────────┐
│maintenance_  ││periodic_     ││temporary_    ││spot_work     ││work_plan     │
│    plan      ││ inspection   ││   repair     ││              ││              │
│  维保计划     ││  定期巡检单   ││  临时维修单   ││  零星用工单   ││  工作计划     │
└──────┬───────┘└──────────────┘└──────┬───────┘└──────────────┘└──────────────┘
       │                              │
       │                              │
       ▼                              ▼
┌──────────────┐              ┌──────────────┐
│inspection_   │              │spare_parts_  │
│    item      │              │    usage     │
│  巡检事项     │              │  备件领用     │
└──────────────┘              └──────┬───────┘
                                     │
                                     ▼
                              ┌──────────────┐
                              │spare_parts_  │
                              │    stock     │
                              │  备件库存     │
                              └──────┬───────┘
                                     │
                                     ▼
                              ┌──────────────┐
                              │spare_parts_  │
                              │   inbound    │
                              │  入库记录     │
                              └──────────────┘


┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              基础配置表                                                │
├─────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐            │
│  │  personnel   │  │  customer    │  │  dictionary  │  │user_dashboard│            │
│  │   人员信息    │  │    客户       │  │    字典       │  │   _config    │            │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘            │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 五、角色权限与操作对应表

### 5.1 管理员权限

| 功能模块 | 操作权限 | 涉及数据表 |
|----------|----------|------------|
| 项目管理 | 增删改查 | project_info |
| 人员管理 | 增删改查 | personnel |
| 客户管理 | 增删改查 | customer |
| 维保计划 | 增删改查、下发 | maintenance_plan |
| 工单管理 | 查看、审批 | periodic_inspection, temporary_repair, spot_work |
| 备件管理 | 增删改查、入库 | spare_parts_stock, spare_parts_inbound |
| 工具管理 | 增删改查 | repair_tools_stock |
| 系统配置 | 增删改查 | dictionary |
| 数据统计 | 查看 | 所有表 |

### 5.2 部门经理权限

| 功能模块 | 操作权限 | 涉及数据表 |
|----------|----------|------------|
| 项目管理 | 查看 | project_info |
| 巡检事项 | 增删改查 | inspection_item |
| 维保计划 | 增删改查、下发 | maintenance_plan |
| 工单管理 | 查看、审批、退回 | periodic_inspection, temporary_repair, spot_work |
| 备件管理 | 查看、审批领用 | spare_parts_stock, spare_parts_usage |
| 工具管理 | 查看、审批领用 | repair_tools_stock, repair_tools_issue |
| 数据统计 | 查看本部门 | 相关表 |

### 5.3 员工权限

| 功能模块 | 操作权限 | 涉及数据表 |
|----------|----------|------------|
| 项目管理 | 查看分配项目 | project_info |
| 工单执行 | 确认、填写、提交 | periodic_inspection, temporary_repair, spot_work |
| 备件领用 | 申请领用 | spare_parts_usage |
| 工具领用 | 申请领用、归还 | repair_tools_issue |
| 个人信息 | 查看修改 | personnel |

---

## 六、特殊业务规则

### 6.1 工单编号规则

| 工单类型 | 前缀 | 格式 | 示例 | 生成时机 |
|----------|------|------|------|----------|
| 定期巡检单 | XJ | XJ-项目编号-YYYYMMDD | XJ-TQ2023423-20251123 | 工单创建时 |
| 临时维修单 | WX | WX-项目编号-YYYYMMDD | WX-TQ2023423-20251123 | 工单创建时 |
| 零星用工单 | YG | YG-项目编号-YYYYMMDD | YG-TQ2023423-20251123 | 工单创建时 |

### 6.2 下发按钮显示规则

```
显示条件：
1. 工单状态为"未进行"
2. 当前日期 >= (计划开始日期 - 5天)
3. 当前用户为管理员或部门经理

计算逻辑：
plan_start_date - current_date <= 5天
```

### 6.3 图片上传规则

```
1. 只支持拍照，不支持图库选择
2. 自动加水印：
   - 姓名（当前登录用户）
   - 当前时间（YYYY-MM-DD HH:mm:ss）
   - 经纬度（如果可以获取到）
3. 生成缩略图为正方形，取中间部分（不变形）
4. 压缩上传，压缩到500K左右
5. 删除图片时提示"是否要删除，新增的图片会重新打水印"
```

### 6.4 零星用工单特殊要求

```
1. 班组签字：需要班组负责人签字确认
2. 身份证拍照：
   - 需要工人进行身份证拍照
   - 正反面都需要拍照
   - 自动识别身份证信息
3. 不展示计划用工字段
```

### 6.5 数据一致性规则

```
1. 核心原则：所有数据以 project_info 表数据为准
2. 同步字段：
   - project_name（项目名称）
   - client_name（客户单位）
   - address（客户地址）
3. 同步时机：
   - project_info 表数据变更时
   - 相关联表查询时实时关联
4. 删除规则：
   - 所有删除操作为非物理删除
   - 删除前弹出确认提示
```

---

## 七、手机端业务流程

### 7.1 手机端功能模块

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              手机端功能模块                                            │
└─────────────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────────────────┐
│                                   首页                                                │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐                      │
│  │  待办工单   │  │  已办工单   │  │  超期提醒   │  │  个人中心   │                      │
│  │   数量      │  │   数量      │  │   数量      │  │            │                      │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘                      │
└──────────────────────────────────────────────────────────────────────────────────────┘
                                         │
         ┌───────────────────────────────┼───────────────────────────────┐
         │                               │                               │
         ▼                               ▼                               ▼
┌──────────────────┐          ┌──────────────────┐          ┌──────────────────┐
│   定期巡检页面    │          │   临时维修页面    │          │   零星用工页面    │
│                  │          │                  │          │                  │
│ - 工单列表       │          │ - 工单列表       │          │ - 工单列表       │
│ - 查看详情       │          │ - 查看详情       │          │ - 查看详情       │
│ - 填写工单       │          │ - 填写工单       │          │ - 填写工单       │
│ - 上传图片       │          │ - 上传图片       │          │ - 身份证拍照     │
│ - 签字确认       │          │ - 签字确认       │          │ - 签字确认       │
│ - 提交审批       │          │ - 提交审批       │          │ - 提交审批       │
└──────────────────┘          └──────────────────┘          └──────────────────┘
```

### 7.2 每日提醒功能

```
提醒内容：
- 超期工单数量
- 待处理工单数量
- 今日到期工单数量

提醒方式：
- 手机端首页显示
- 每日定时推送（可配置）

数据来源：
SELECT COUNT(*) FROM periodic_inspection 
WHERE status NOT IN ('已完成') 
AND plan_end_date < CURRENT_DATE
```

---

## 八、业务流程异常处理

### 8.1 工单退回处理

```
退回流程：
1. 部门经理审批时选择"退回"
2. 填写退回原因
3. 系统记录退回操作（保留痕迹）
4. 工单状态变为"已退回"
5. 员工收到退回通知
6. 员工修改后重新提交
7. 重新进入审批流程

退回记录：
- 退回时间
- 退回原因
- 退回人
- 修改记录
```

### 8.2 数据异常处理

```
异常类型：
1. 项目编号不存在
   - 处理：提示错误，不允许操作

2. 库存不足
   - 处理：提示库存不足，不允许领用

3. 工具已领用
   - 处理：提示工具已被领用，等待归还

4. 数据不一致
   - 处理：运行同步脚本，以project_info为准
```

---

## 九、数据表与业务功能对照总表

| 序号 | 数据表 | 业务功能 | 主要操作 | 关联表 |
|------|--------|----------|----------|--------|
| 1 | project_info | 项目管理 | 项目CRUD | customer, personnel |
| 2 | maintenance_plan | 维保计划 | 计划CRUD、下发 | project_info, inspection_item |
| 3 | work_plan | 工作计划 | 统一工单管理 | project_info |
| 4 | periodic_inspection | 定期巡检 | 巡检执行、审批 | project_info, maintenance_plan |
| 5 | temporary_repair | 临时维修 | 维修执行、审批 | project_info, spare_parts_usage |
| 6 | spot_work | 零星用工 | 用工执行、审批 | project_info, personnel |
| 7 | inspection_item | 巡检事项 | 事项配置 | - |
| 8 | spare_parts_stock | 备件库存 | 库存管理 | spare_parts_inbound, spare_parts_usage |
| 9 | spare_parts_usage | 备件领用 | 领用记录 | spare_parts_stock, project_info |
| 10 | spare_parts_inbound | 备件入库 | 入库记录 | spare_parts_stock |
| 11 | repair_tools_stock | 工具库存 | 库存管理 | repair_tools_issue |
| 12 | repair_tools_issue | 工具领用 | 领用归还 | repair_tools_stock, project_info |
| 13 | personnel | 人员管理 | 人员CRUD | - |
| 14 | customer | 客户管理 | 客户CRUD | project_info |
| 15 | dictionary | 字典管理 | 配置管理 | - |
| 16 | user_dashboard_config | 仪表板配置 | 个性化配置 | - |

---

*文档生成时间: 2025-02-17*
